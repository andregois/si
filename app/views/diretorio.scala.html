@(arquivos: List[Arquivo], pastas: List[Pasta], compartilhadosW: List[Arquivo], compartilhadosR: List[Arquivo])
@import b3.vertical.fieldConstructor

@main("") {

    <h2>Bem vindo(a), @session().get("username")</h2>
    <hr>

    @if(pastas.isEmpty) {
        <h3>Você não possue pastas.</h3>
        <hr>
    } else {
        <h3>Minhas pastas:</h3>
        @for(pasta <- pastas) {
            @b3.static() {
                <a href="@routes.Application.pasta(pasta.getId())">@pasta.getName()</a>
            }
        }
    }

    @if(arquivos.isEmpty) {
        <h3>Você não possue arquivos.</h3>
        <hr>
    } else {
        <h3>Meus arquivos:</h3>
        @for(arquivo <- arquivos) {
            @b3.static() {
                <a href="@routes.Application.arquivo(arquivo.getId(), "w")">@arquivo.getName().@arquivo.getExtension</a>
            }
        }
    }

    @if(compartilhadosW.isEmpty && compartilhadosR.isEmpty) {
        <h3>Nenhum arquivo compartilhado com você.</h3>
        <hr>
    } else {
        <h3>Arquivos compartilhados comigo:</h3>
        <table>
            @for(arquivo <- compartilhadosW) {
                @if(arquivo.getCompartilhado() == true) {
                    @arquivo.setCompartilhado(false)
                    <script language="JavaScript" type="text/javascript">
                            alert("Voce Possui um Novo Arquivo Compartilhado")
                    </script>
                    @arquivo.update()
                }
                @b3.static() {
                    <a href="@routes.Application.arquivo(arquivo.getId(), "w")">@arquivo.getName().@arquivo.getExtension()</a>
                }
            }

            @for(arquivo <- compartilhadosR) {
                @if(arquivo.getCompartilhado() == true) {
                    @arquivo.setCompartilhado(false)
                    <script language="JavaScript" type="text/javascript">
                            alert("Voce Possui um Novo Arquivo Compartilhado")
                    </script>
                    @arquivo.update()
                }
                @b3.static() {
                    <a href="@routes.Application.arquivo(arquivo.getId(), "r")">@arquivo.getName().@arquivo.getExtension()</a>
                }
            }
        </table>
        }
    <hr>

    <table>
        <tr>
            <th>
            @b3.form(action = routes.Application.formularioNovoArquivo(session().get("root"))) {
                @b3.buttonType("new_file", 'class -> "btn btn-primary") {
                    <span class="glyphicon glyphicon-file"></span> Novo arquivo }
            }
            </th>
            <th>
            @b3.form(action = routes.Application.formularioNovaPasta(session().get("root"))) {
                @b3.buttonType("new_folder", 'class -> "btn btn-primary") {
                    <span class="glyphicon glyphicon-folder-open"></span> Nova Pasta }
            }
            </th>
        </tr>
    </table>

    @b3.form(action = routes.Application.deslogar()) {
        @b3.buttonType("index", 'class -> "btn btn-danger") {
            <span class="glyphicon glyphicon-remove"></span> Sair }
    }
}